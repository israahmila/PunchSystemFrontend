<form [formGroup]="poinconForm" (ngSubmit)="onSubmit()" class="ajouter-form">

  <!-- üìå Section 1: Informations G√©n√©rales -->
  <mat-card class="section-card">
    <mat-card-title>Informations G√©n√©rales</mat-card-title>

    <div class="row">
      <mat-form-field appearance="fill" class="field">
        <mat-label>Code Format</mat-label>
        <input matInput formControlName="codeFormat" required>
      </mat-form-field>

      <mat-form-field appearance="fill" class="field">
        <mat-label>Forme</mat-label>
        <input matInput formControlName="forme">
      </mat-form-field>

      <mat-form-field appearance="fill" class="field">
        <mat-label>Code GMAO</mat-label>
        <input matInput formControlName="codeGMAO">
      </mat-form-field>
    </div>

    <div class="row">
      <mat-form-field appearance="fill" class="field">
        <mat-label>Marque</mat-label>
        <input matInput formControlName="marque" [matAutocomplete]="marqueAuto">
        <mat-autocomplete #marqueAuto="matAutocomplete">
          <mat-option *ngFor="let option of marqueSuggestions$ | async" [value]="option">
            {{ option }}
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>

      <mat-form-field appearance="fill" class="field">
        <mat-label>Fournisseur</mat-label>
        <input matInput formControlName="fournisseur" [matAutocomplete]="fournisseurAuto">
        <mat-autocomplete #fournisseurAuto="matAutocomplete">
          <mat-option *ngFor="let option of fournisseurSuggestions$ | async" [value]="option">
            {{ option }}
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>

      <mat-form-field appearance="fill" class="field">
        <mat-label>Gravure Sup</mat-label>
        <input matInput formControlName="gravureSup">
      </mat-form-field>
    </div>

    <div class="row">
      <mat-form-field appearance="fill" class="field">
        <mat-label>Gravure Inf</mat-label>
        <input matInput formControlName="gravureInf">
      </mat-form-field>

      <mat-form-field appearance="fill" class="field">
        <mat-label>S√©cabilit√©</mat-label>
        <mat-select formControlName="secabilite">
          <mat-option *ngFor="let option of ['a', 'b', 'c']" [value]="option">{{ option }}</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="fill" class="field">
        <mat-label>Clavetage</mat-label>
        <mat-select formControlName="clavetage">
          <mat-option *ngFor="let option of ['a', 'b', 'c']" [value]="option">{{ option }}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="row">
      <mat-form-field appearance="fill" class="field">
        <mat-label>Emplacement R√©ception</mat-label>
        <mat-select formControlName="emplacementReception">
          <mat-option *ngFor="let option of ['a', 'b', 'c']" [value]="option">{{ option }}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </mat-card>

  <!-- üìÖ Section 2: Dates -->
  <mat-card class="section-card">
    <mat-card-title>Dates</mat-card-title>

    <div class="row">
      <mat-form-field appearance="fill" class="field">
        <mat-label>Date de Fabrication</mat-label>
        <input matInput [matDatepicker]="dp1" formControlName="dateFabrication">
        <mat-datepicker-toggle matSuffix [for]="dp1"></mat-datepicker-toggle>
        <mat-datepicker #dp1></mat-datepicker>
      </mat-form-field>

      <mat-form-field appearance="fill" class="field">
        <mat-label>Date de R√©ception</mat-label>
        <input matInput [matDatepicker]="dp2" formControlName="dateReception">
        <mat-datepicker-toggle matSuffix [for]="dp2"></mat-datepicker-toggle>
        <mat-datepicker #dp2></mat-datepicker>
      </mat-form-field>

      <mat-form-field appearance="fill" class="field">
        <mat-label>Date de Mise en Service</mat-label>
        <input matInput [matDatepicker]="dp3" formControlName="dateMiseEnService">
        <mat-datepicker-toggle matSuffix [for]="dp3"></mat-datepicker-toggle>
        <mat-datepicker #dp3></mat-datepicker>
      </mat-form-field>
    </div>
  </mat-card>

  <!-- üìù Section 3: Commentaire + Fichier -->
  <mat-card class="section-card">
    <mat-card-title>Commentaire & Fiche Technique</mat-card-title>

    <div class="row">
      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Commentaire</mat-label>
        <textarea matInput formControlName="commentaire" rows="4"></textarea>
      </mat-form-field>
    </div>

    <div class="row">
      <input type="file" (change)="onFileChange($event)" accept=".pdf,.doc,.docx,.jpg,.png" />
    </div>
  </mat-card>

  <mat-card class="section-card">
    <mat-card-title>Forme</mat-card-title>
    <div class="form-section">
      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Forme</mat-label>
        <input type="text" matInput [formControl]="formeControl" [matAutocomplete]="autoForme">
        <mat-autocomplete #autoForme="matAutocomplete" (optionSelected)="onFormeSelected($event)">
          <mat-option *ngFor="let option of filteredFormes$ | async" [value]="option">
            {{ option }}
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>
    </div>
  </mat-card>

  <mat-card class="section-card">
    <mat-card-title>Dimensions</mat-card-title>
    <div class="form-section">
      <mat-form-field appearance="fill" class="field">
        <mat-label>Diam√®tre (mm)</mat-label>
        <input matInput formControlName="diametre" type="number">
      </mat-form-field>

      <mat-form-field appearance="fill" class="field">
        <mat-label>Largeur (mm)</mat-label>
        <input matInput formControlName="largeur" type="number">
      </mat-form-field>

      <mat-form-field appearance="fill" class="field">
        <mat-label>Longueur (mm)</mat-label>
        <input matInput formControlName="longueur" type="number">
      </mat-form-field>
    </div>

    <div class="form-section">
      <mat-form-field appearance="fill" class="field">
        <mat-label>√âpaisseur (mm)</mat-label>
        <input matInput formControlName="epaisseur" type="number">
      </mat-form-field>

      <mat-form-field appearance="fill" class="field">
        <mat-label>Hauteur (mm)</mat-label>
        <input matInput formControlName="hauteur" type="number">
      </mat-form-field>
    </div>
  </mat-card>

  <div class="actions">
    <button mat-raised-button color="primary" type="submit" [disabled]="dimensionsForm.invalid">Suivant ‚Üí</button>
  </div>
  
</form>
