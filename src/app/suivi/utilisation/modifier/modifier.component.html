<mat-card class="form-card">
    <mat-card-title>Modifier Utilisation</mat-card-title>
    <mat-card-content>
      <form [formGroup]="utilisationForm" (ngSubmit)="onSubmit()">
        
        <!-- Basic Info Section -->
        <div class="form-grid">
          <mat-form-field appearance="outline">
            <mat-label>N° Utilisation</mat-label>
            <input matInput formControlName="numero" required />
          </mat-form-field>
  
          <mat-form-field appearance="outline">
            <mat-label>Date Utilisation</mat-label>
            <input matInput formControlName="dateUtilisation" type="date" required />
          </mat-form-field>
  
          <mat-form-field appearance="outline">
            <mat-label>Date Retour</mat-label>
            <input matInput formControlName="dateRetour" type="date" required />
          </mat-form-field>
  
          <mat-form-field appearance="outline">
            <mat-label>Utilisateurs</mat-label>
            <mat-select formControlName="utilisateurs" multiple required>
              <mat-option *ngFor="let utilisateur of utilisateurs" [value]="utilisateur">
                {{ utilisateur }}
              </mat-option>
            </mat-select>
          </mat-form-field>
  
          <mat-form-field appearance="outline">
            <mat-label>Comprimeuses</mat-label>
            <mat-select formControlName="comprimeuses" multiple required>
              <mat-option *ngFor="let comprimeuse of comprimeuses" [value]="comprimeuse">
                {{ comprimeuse }}
              </mat-option>
            </mat-select>
          </mat-form-field>
  
          <mat-form-field appearance="outline">
            <mat-label>Produit</mat-label>
            <mat-select formControlName="produit" required>
              <mat-option *ngFor="let produit of produits" [value]="produit">
                {{ produit }}
              </mat-option>
            </mat-select>
          </mat-form-field>
  
          <mat-form-field appearance="outline">
            <mat-label>Emplacement Retour</mat-label>
            <mat-select formControlName="emplacementRetour" required>
              <mat-option *ngFor="let emplacement of emplacements" [value]="emplacement">
                {{ emplacement }}
              </mat-option>
            </mat-select>
          </mat-form-field>
  
          <mat-form-field appearance="outline">
            <mat-label>Lots</mat-label>
            <mat-select formControlName="lots" multiple required>
              <mat-option *ngFor="let lot of lots" [value]="lot">
                {{ lot }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
  
        <!-- Poinçons Section (Two Columns) -->
        <div class="poincon-grid" formArrayName="poincons">
          <div *ngFor="let poinconGroup of poinconsArray.controls; let i = index" [formGroupName]="i">
            <mat-form-field appearance="outline">
              <mat-label>N° Poinçon {{ i + 1 }}</mat-label>
              <input matInput formControlName="numero" />
            </mat-form-field>
  
            <mat-form-field appearance="outline">
              <mat-label>État</mat-label>
              <input matInput formControlName="etat" />
            </mat-form-field>
          </div>
        </div>
  
        <!-- Comment Field -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Commentaire</mat-label>
          <textarea matInput formControlName="comment"></textarea>
        </mat-form-field>
  
        <!-- Action Buttons -->
        <div class="form-actions">
          <button mat-raised-button color="primary" type="submit">Enregistrer</button>
          <button mat-stroked-button color="warn" (click)="cancel()">Annuler</button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
  